<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Hello React03</title>
    <link rel="stylesheet" href="C:/Users/mseit/Desktop/samurai/lesson/React/build/03.00.table.css">
  </head>
  <body>
    <div id="app"></div>
    <script src="C:/Users/mseit/Desktop/samurai/lesson/React/build/react.js"></script>
    <script src="C:/Users/mseit/Desktop/samurai/lesson/React/build/react-dom.js"></script>
    <script>
      // ３章：<Excel>高機能な表コンポーネント
      // -----------------------------------------------------------
      var Excel = React.createClass({
        // displayNameプロパティを使用すると、React側に名前を伝えることができる
        displayName: "Excel",

        propTypes: {
          headers: React.PropTypes.arrayOf(React.PropTypes.string),
          initialDate: React.PropTypes.arrayOf(
            React.PropTypes.arrayOf(React.PropTypes.string)
          ),
        },

        getInitialState: function () {
          return { data: this.props.initialData };
        },

        _sort: function (e) {
          var column = e.target.cellIndex;
          var data = this.state.data.slice();
          data.sort(function (a, b) {
            return a[column] > b[column] ? 1 : -1;
          });
          this.setState({
            data: data,
          });
        },

        render: function () {
          return React.DOM.table(
            null,
            React.DOM.thead(
              { onClick: this._sort },
              React.DOM.tr(
                null,
                this.props.headers.map(function (title, idx) {
                  return React.DOM.th({ key: idx }, title);
                })
              )
            ),
            React.DOM.tbody(
              null,
              this.state.data.map(function (row, idx) {
                return React.DOM.tr(
                  { key: idx },
                  row.map(function (cell, idx) {
                    return React.DOM.td({ key: idx }, cell);
                  })
                );
              })
            )
          );
        },
      });

      //   render: function() {
      //     return (
      //       React.DOM.table(null,
      //        React.DOM.thead(null,
      //         React.DOM.tr(null,
      //          this.props.headers.map(function(title,idx) {
      //            return React.DOM.th(null,title);
      //          })
      //         )
      //        )
      //       )
      //     );
      //   }
      // });

      var headers = ["Book", "Author", "Language", "Published", "Sales"];

      var data = [
        [
          "The Lord of Rings",
          "]. R.R. Tolkine",
          "English",
          "1954-1955",
          "150 million",
        ],
        [
          "Le Petit Prince (The Little Prince)",
          "Antoine de Saint-Exupery",
          "French",
          "1943",
          "140 million",
        ],
        [
          "Harry Potter and the Philosopher's Stone",
          "J.K. Rowling",
          "English",
          "1997",
          "107 million",
        ],
      ];

      ReactDOM.render(
        React.createElement(Excel, {
          headers: headers,
          initialData: data,
        }),
        document.getElementById("app")
      );
    </script>
  </body>
</html>
